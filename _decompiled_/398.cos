Function AdvScreen::startSelect()
	Integer ret
	ret := 0
	If (IsLoad() == -1)
		If ({PUSH_OBJ  4}.hitretCountTemp <= ({PUSH_OBJ  4}.hitretCount))
			{PUSH_OBJ  4}.hitretCountTemp += 1
			this.msgInfo.clear()
			this.selectResult := {PUSH_OBJ  4}.select[{PUSH_OBJ  4}.selectCount]
			{PUSH_OBJ  4}.selectCount += 1
			this.selectItem.Remove()
			Return ret
		EndIf
		LeaveLoad()
	EndIf
	enterSelect()
	SpriteParam param
	this.msgFrame.msprMess.GetParameter(param)
	Point curPos
	curPos := this.msgFrame.msprMess.GetCursorPos()
	setupSelectItem()
	showSelectItem()
	Integer i
	i := 0
	Integer select
	select := 0
	WndSpriteCmd wscmd
	FlushCommandQueue(-1)
	FlushJoyButton()
	Integer nInput
@_l_73:
	PUSH_VAL Integer -1i
	JUMP_OK _l_493
	PUSH_VAR nInput
	PUSH_VAR wscmd
	PUSH_VAL Integer 33i
	CALL GetCommand
	POP =
	NOP
	PUSH_VAL Integer 0i
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_99
	CALL IsDebugJump
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_99
	CALL LeaveDebugJump
	NOP
	CALL GetDebugJumpScenario
	CALL Change
	NOP
	PUSH_VAR ret
	PUSH_VAL Integer 40i
	POP =
	NOP
	JUMP _l_493
@_l_99:
	PUSH_VAL Integer 0i
	JUMP_OK _l_102
	JUMP _l_492
@_l_102:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_SELECT"
	==
	JUMP_OK _l_148

	INIT_LOCAL struct Point pt
	PUSH_VAR pt
	PUSH_UNK
	CALL_METHOD GetCursorPos
	POP =
	NOP
	PUSH_VAR i
	PUSH_VAL Integer 0i
	POP =
	NOP
@_l_118:
	PUSH_VAR i
	this.selectItem
	CALL_METHOD GetLength
	<=
	JUMP_OK _l_144
	this.sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAR pt
	GET_FIELD x
	PUSH_VAR pt
	GET_FIELD y
	CALL IsHitSprite
	JUMP_OK _l_139
	PUSH_VAR select
	PUSH_VAR i
	PUSH_VAL Integer 1i
	+
	POP =
	NOP
	JUMP _l_144
@_l_139:
	PUSH_VAR i
	PUSH_VAL Integer 1i
	POP +=
	NOP
	JUMP _l_118
@_l_144:
	NOP
	JUMP _l_493
	NOP
	JUMP _l_492
@_l_148:
	PUSH_UNK
	PUSH_VAL Integer 4i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	JUMP_OK _l_157
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_157:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_CLOSE"
	==
	PUSH_UNK
	PUSH_VAL Integer 5i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 8i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_223
	CALL isAutoMode
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_182
	PUSH_VAL Integer 0i
	CALL autoMode
	NOP
	JUMP _l_220
@_l_182:
	CALL isSkip
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_190
	PUSH_VAL Integer 0i
	CALL skip
	NOP
	JUMP _l_220
@_l_190:
	CALL hideSelectItem
	NOP

	INIT_LOCAL Integer isShow
	this.msgFrame
	CALL_METHOD isShow
	POP =
	PUSH_VAR pt
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_206
	this.msgFrame
	PUSH_VAL Integer 0i
	PUSH_VAL Integer -1i
	CALL_METHOD hide
	NOP
@_l_206:
	CALL TestHitret
	NOP
	CALL showSelectItem
	NOP
	PUSH_VAR pt
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_219
	this.msgFrame
	PUSH_VAL Integer 0i
	PUSH_VAL Integer -1i
	CALL_METHOD show
	NOP
@_l_219:
	NOP
@_l_220:
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_223:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_SKIP"
	==
	PUSH_UNK
	PUSH_VAL Integer 28i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 7i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_249
	PUSH_VAL Integer -1i
	CALL skip
	NOP
	PUSH_VAL Integer -1i
	CALL FlushCommandQueue
	NOP
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_249:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_AUTO"
	==
	PUSH_UNK
	PUSH_VAL Integer 27i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 14i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_275
	PUSH_VAL Integer -1i
	CALL autoMode
	NOP
	PUSH_VAL Integer -1i
	CALL FlushCommandQueue
	NOP
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_275:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_QLOAD"
	==
	PUSH_UNK
	PUSH_VAL Integer 23i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 17i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_313
	PUSH_OBJ  6
	GET_FIELD fQSave
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_310
	PUSH_VAL String "クイックロードします"
	PUSH_VAL Integer -1i
	CALL Confirm
	PUSH_VAL Integer -1i
	==
	JUMP_OK _l_310
	CALL QuickLoad
	NOP
	PUSH_VAR ret
	PUSH_VAL Integer 40i
	POP =
	NOP
	JUMP _l_493
@_l_310:
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_313:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_QSAVE"
	==
	PUSH_UNK
	PUSH_VAL Integer 22i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 9i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_343
	CALL IsRecollectMode
	PUSH_VAL Integer 0i
	==
	JUMP_OK _l_340
	CALL QuickSave
	NOP
	this.msgFrame
	PUSH_VAL Integer -1i
	CALL_METHOD enableQLoad
	NOP
@_l_340:
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_343:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_CONFIG"
	==
	PUSH_UNK
	PUSH_VAL Integer 26i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 13i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_376
	PUSH_VAR ret
	CALL callConfig
	POP =
	NOP
	PUSH_VAR ret
	PUSH_VAL Integer 30i
	==
	PUSH_VAR ret
	PUSH_VAL Integer 20i
	==
	or
	JUMP_OK _l_373
	JUMP _l_493
@_l_373:
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_376:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_HISTORY"
	==
	PUSH_UNK
	PUSH_VAL Integer 10i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 29i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 0i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_404
	CALL callHistory
	NOP
	CALL FlushJoyButton
	NOP
	JUMP _l_492
@_l_404:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_LOAD"
	==
	PUSH_UNK
	PUSH_VAL Integer 25i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 11i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_441

	INIT_LOCAL parent arrayHideSpr
	INIT_LOCAL parent arrayShowSpr
	PUSH_VAR ret
	PUSH_VAL Integer -1i
	PUSH_VAR pt
	PUSH_VAR isShow
	CALL callLoadSave
	POP =
	NOP
	PUSH_VAR ret
	PUSH_VAL Integer 40i
	==
	JUMP_OK _l_437
	NOP
	JUMP _l_493
@_l_437:
	CALL FlushJoyButton
	NOP
	NOP
	JUMP _l_492
@_l_441:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_SAVE"
	==
	PUSH_UNK
	PUSH_VAL Integer 24i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	PUSH_UNK
	PUSH_VAL Integer 12i
	CALL_METHOD GetJoyButtonPushed
	PUSH_VAL Integer 0i
	>
	or
	JUMP_OK _l_478

	INIT_LOCAL parent arrayHideSpr
	INIT_LOCAL parent arrayShowSpr
	PUSH_VAR ret
	PUSH_VAL Integer 0i
	PUSH_VAR pt
	PUSH_VAR isShow
	CALL callLoadSave
	POP =
	NOP
	PUSH_VAR ret
	PUSH_VAL Integer 40i
	==
	JUMP_OK _l_474
	NOP
	JUMP _l_493
@_l_474:
	CALL FlushJoyButton
	NOP
	NOP
	JUMP _l_492
@_l_478:
	PUSH_VAR wscmd
	GET_FIELD strID
	PUSH_VAL String "ID_VOICE"
	==
	JUMP_OK _l_492
	PUSH_OBJ  4
	GET_FIELD voiceLog
	PUSH_VAL Integer 0i
	CALL_METHOD get
	PUSH_VAL Integer -1i
	CALL PlayVoice
	NOP
	CALL FlushJoyButton
	NOP
@_l_492:
	JUMP _l_73
@_l_493:
	PUSH_VAR select
	PUSH_VAL Integer 0i
	!=
	JUMP_OK _l_575
	PUSH_OBJ  5
	GET_FIELD screenEffect
	PUSH_VAL Integer 0i
	==
	JUMP_OK _l_555

	INIT_LOCAL Reference rTarget
	PUSH_VAR i
	PUSH_VAL Integer 0i
	POP =
	NOP
@_l_508:
	PUSH_VAR i
	this.selectItem
	CALL_METHOD GetLength
	<=
	JUMP_OK _l_549
	PUSH_VAR select
	PUSH_VAR i
	PUSH_VAL Integer 1i
	+
	!=
	JUMP_OK _l_526
	this.sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAL Integer 256i
	CALL_METHOD SetTransparency
	NOP
	JUMP _l_544
@_l_526:
	this.sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAL Integer 256i
	CALL_METHOD SetBlendingEnvelope
	NOP
	this.sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAL Integer 500i
	CALL_METHOD BeginActivation
	NOP
	PUSH_VAR pt
	this.sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	POP =
	NOP
@_l_544:
	PUSH_VAR i
	PUSH_VAL Integer 1i
	POP +=
	NOP
	JUMP _l_508
@_l_549:
	PUSH_VAR pt
	PUSH_VAL Integer 0i
	CALL WaitUntilSpriteActive
	NOP
	NOP
	JUMP _l_575
@_l_555:
	PUSH_VAR i
	PUSH_VAL Integer 0i
	POP =
	NOP
@_l_559:
	PUSH_VAR i
	this.selectItem
	CALL_METHOD GetLength
	<=
	JUMP_OK _l_575
	this.sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAL Integer 256i
	CALL_METHOD SetTransparency
	NOP
	PUSH_VAR i
	PUSH_VAL Integer 1i
	POP +=
	NOP
	JUMP _l_559
@_l_575:
	PUSH_UNK
	CALL_METHOD Lock
	NOP
	PUSH_VAR i
	PUSH_VAL Integer 0i
	POP =
	NOP
@_l_582:
	PUSH_VAR i
	this.selectItem
	CALL_METHOD GetLength
	<=
	JUMP_OK _l_598
	PUSH_UNK
	this.sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	CALL_METHOD DetachSprite
	NOP
	PUSH_VAR i
	PUSH_VAL Integer 1i
	POP +=
	NOP
	JUMP _l_582
@_l_598:
	this.sprSelect
	CALL_METHOD Remove
	NOP
	PUSH_UNK
	CALL_METHOD Unlock
	NOP
	this.selectItem
	CALL_METHOD Remove
	NOP
	CALL IsLoad
	PUSH_VAL Integer 0i
	==
	JUMP_OK _l_625
	this.selectResult
	PUSH_VAR select
	POP =
	NOP
	PUSH_OBJ  4
	GET_FIELD hitretCount
	PUSH_VAL Integer 1i
	POP +=
	NOP
	PUSH_OBJ  4
	GET_FIELD select
	PUSH_VAR select
	POP +=
	NOP
@_l_625:
	CALL isSkip
	PUSH_VAL Integer -1i
	==
	PUSH_OBJ  5
	GET_FIELD lockSkip
	PUSH_VAL Integer 0i
	==
	math_UNK2
	JUMP_OK _l_637
	PUSH_VAL Integer 0i
	CALL skip
	NOP
@_l_637:
	CALL leaveSelect
	NOP
	PUSH_VAR ret
	Return
	PUSH_VAL Integer 0i
	Return
EndFunc

